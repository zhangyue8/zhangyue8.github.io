<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Let's load some data!</title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <style>
            body{
                margin:0;
            }
        
        
        
        </style>
    </head>
    <body>
        Hello
        <svg id="chart"></svg>









            <script>
                var realtimeURL = "https://whiteboard.datawheel.us/api/google-analytics/realtime/random";
                var frequency = 1 * 1000; 


                var dataMax = 5;
                var data = [];

                var width=window.innerWidth;
                var height=window.innerHeight;
                var svg= d3.select("#chart")
                    .attr("width",width)
                    .attr("height",height);

                function fetchData() {

                d3.json(realtimeURL, function(error, users) {

                    data.unshift(users);
                    if (data.length > dataMax) data.pop();
                    console.log(data);

                    var bars = svg.selectAll(".bar")
                        .data(data);

                    bars.enter().append("rect")
                    .attr("class", "bar");

                    bars.exit().remove();

                });
                }
            


            
            
                fetchData();
                setInterval(fetchData, frequency);
            </script>        
        
    </body>
</html>